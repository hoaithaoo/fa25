<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hợp Đồng Nhập Hàng</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Times New Roman', Times, serif;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            border-bottom: 2px solid #333;
            padding-bottom: 20px;
        }

        .company-info {
            flex: 1;
        }

        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 5px;
        }

        .company-details {
            font-size: 11px;
            line-height: 1.4;
            color: #333;
        }

        .title {
            text-align: center;
            margin: 30px 0;
        }

        .title h1 {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .title p {
            font-size: 12px;
            font-style: italic;
            color: #666;
        }

        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .info-row {
            display: flex;
            margin-bottom: 8px;
            font-size: 13px;
            line-height: 1.6;
        }

        .info-label {
            min-width: 120px;
            font-weight: 500;
        }

        .info-value {
            flex: 1;
            border-bottom: 1px dotted #999;
            padding-left: 10px;
        }

        .article {
            margin-bottom: 25px;
        }

        .article-title {
            font-weight: bold;
            font-size: 13px;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .article-content {
            font-size: 13px;
            line-height: 1.8;
            text-align: justify;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            font-size: 12px;
        }

        table th, table td {
            border: 1px solid #333;
            padding: 8px;
            text-align: left;
        }

        table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .price-total {
            font-weight: bold;
            font-style: italic;
        }

        .signatures {
            display: flex;
            justify-content: space-between;
            margin-top: 50px;
            text-align: center;
        }

        .signature-box {
            flex: 1;
            padding: 20px;
        }

        .signature-box h3 {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        .signature-box .subtitle {
            font-size: 12px;
            font-style: italic;
            margin-bottom: 20px;
        }

        .signature-image {
            max-width: 150px;
            max-height: 80px;
            width: auto;
            height: auto;
            object-fit: contain;
            display: block;
            margin: 10px auto;
        }

        .signature-box .signature-container {
            min-height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .container {
                box-shadow: none;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <div class="company-info">
            <div class="logo">ELECTRA</div>
            <div class="company-details">
                <strong>ELECTRIC VEHICLE MANUFACTURER</strong><br>
                Địa chỉ: Số 45 Đường Lê Văn Sỹ, Phường 13, Quận 3, TP. Hồ Chí Minh<br>
                <strong>ĐT:</strong> 0356964383 - <strong>MST:</strong> ..................... <br>
            </div>
        </div>
    </div>

    <div class="title">
        <h1>HỢP ĐỒNG NHẬP HÀNG</h1>
        <p>Số: <span th:text="${transaction.inventoryId}">...</span>/HD/NH<br>
            <span th:text="${#temporals.format(transaction.orderDate, 'dd')}">...</span>, ngày <span th:text="${#temporals.format(transaction.orderDate, 'MM')}">...</span> tháng <span th:text="${#temporals.format(transaction.orderDate, 'yyyy')}">...</span> năm <span th:text="${#temporals.format(transaction.orderDate, 'yyyy')}">...</span><br>
            Chúng tôi gồm có bên:</p>
    </div>

    <div class="section">
        <div class="section-title">BÊN BÁN (BÊN A - HÃNG SẢN XUẤT):</div>
        <div class="info-row">
            <span class="info-label">Đại diện:</span>
            <span class="info-value" th:text="${evmStaff.fullName}">...</span>
        </div>
        <div class="info-row">
            <span class="info-label">Địa chỉ:</span>
            <span class="info-value">Số 45 Đường Lê Văn Sỹ, Phường 13, Quận 3, TP. Hồ Chí Minh</span>
        </div>
        <div class="info-row">
            <span class="info-label">Điện thoại:</span>
            <span class="info-value" th:text="${evmStaff.phone}">...</span>
        </div>
    </div>

    <div class="section">
        <div class="section-title">BÊN MUA (BÊN B - ĐẠI LÝ):</div>
        <div class="info-row">
            <span class="info-label">Tên đại lý:</span>
            <span class="info-value" th:text="${store.storeName}">...</span>
        </div>
        <div class="info-row">
            <span class="info-label">Địa chỉ:</span>
            <span class="info-value" th:text="${store.address}">...</span>
        </div>
        <div class="info-row">
            <span class="info-label">Điện thoại:</span>
            <span class="info-value" th:text="${store.phone}">...</span>
        </div>
        <div class="info-row">
            <span class="info-label">Chủ đại lý:</span>
            <span class="info-value" th:text="${store.ownerName}">...</span>
        </div>
        <p style="font-size: 13px; margin-top: 10px; line-height: 1.6;">
            Sau khi bàn bạc thỏa thuận, hai bên cùng nhau thống nhất ký kết hợp đồng nhập hàng với các điều khoản như sau:
        </p>
    </div>

    <div class="article">
        <div class="article-title">ĐIỀU 1. ĐỐI TƯỢNG HỢP ĐỒNG</div>
        <table>
            <thead>
            <tr>
                <th>STT</th>
                <th>Mô tả hàng hóa</th>
                <th>SL</th>
                <th>Đơn giá</th>
                <th>Giảm giá (%)</th>
                <th>Thành tiền</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td style="text-align: center;">1</td>
                <td>
                    <strong>Mẫu xe: <span th:text="${transaction.modelName}">...</span></strong><br>
                    Màu sơn: <span th:text="${transaction.colorName}">...</span>
                </td>
                <td style="text-align: center;" th:text="${transaction.importQuantity}">...</td>
                <td style="text-align: right;" th:text="${#numbers.formatDecimal(transaction.unitBasePrice, 0, 'COMMA', 0, 'POINT')}">...</td>
                <td style="text-align: center;">
                    <span th:if="${transaction.discountPercentage > 0}">
                        <span th:text="${transaction.discountPercentage}">...</span>%<br>
                        (<span th:text="${#numbers.formatDecimal(transaction.discountAmount, 0, 'COMMA', 0, 'POINT')}">...</span> VNĐ)
                    </span>
                </td>
                <td style="text-align: right;" th:text="${#numbers.formatDecimal(transaction.totalPrice, 0, 'COMMA', 0, 'POINT')}">...</td>
            </tr>
            <tr>
                <td colspan="2" class="price-total">Tổng Giá trị Hợp đồng</td>
                <td style="text-align: center;" th:text="${transaction.importQuantity}">Tổng SL</td>
                <td style="text-align: right;" th:text="${#numbers.formatDecimal(transaction.totalBasePrice, 0, 'COMMA', 0, 'POINT')}">Tổng đơn giá</td>
                <td style="text-align: center;">
                    <span th:if="${transaction.discountPercentage > 0}">
                        <span th:text="${transaction.discountPercentage}">...</span>%<br>
                        (<span th:text="${#numbers.formatDecimal(transaction.discountAmount, 0, 'COMMA', 0, 'POINT')}">...</span> VNĐ)
                    </span>
                </td>
                <td style="text-align: right;" th:text="${#numbers.formatDecimal(transaction.totalPrice, 0, 'COMMA', 0, 'POINT')}">Tổng thanh toán</td>
            </tr>
            </tbody>
        </table>
        <p class="note">Bằng chữ: .......................... -/-.</p>
    </div>

    <div class="article">
        <div class="article-title">ĐIỀU 2. THANH TOÁN</div>
        <div class="article-content">
            <p>Bên B thực hiện thanh toán giá trị hợp đồng cho Bên A với số tiền là <strong th:text="${#numbers.formatDecimal(transaction.totalPrice, 0, 'COMMA', 0, 'POINT')}">...</strong> VNĐ.</p>
            <p>Thời hạn thanh toán: Trong vòng 07 (bảy) ngày làm việc kể từ ngày ký hợp đồng.</p>
        </div>
    </div>

    <div class="article">
        <div class="article-title">ĐIỀU 3. GIAO HÀNG</div>
        <div class="article-content">
            <p>Bên A sẽ giao hàng cho Bên B tại địa chỉ: <span th:text="${store.address}">...</span></p>
            <p>Thời gian giao hàng: Sau khi Bên B hoàn tất thanh toán và Bên A xác nhận thanh toán thành công.</p>
        </div>
    </div>

    <div class="article">
        <div class="article-title">ĐIỀU 4. ĐIỀU KHOẢN CHUNG</div>
        <div class="article-content">
            <p>Hợp đồng này có hiệu lực kể từ ngày hai bên ký tên và đóng dấu (nếu có).</p>
            <p>Mọi tranh chấp phát sinh từ hợp đồng này sẽ được giải quyết thông qua thương lượng. Nếu không thương lượng được, sẽ được giải quyết tại Tòa án có thẩm quyền.</p>
        </div>
    </div>

    <div class="signatures">
        <div class="signature-box">
            <h3>BÊN BÁN (BÊN A)</h3>
            <p class="subtitle">Đại diện hãng sản xuất</p>
            <p style="margin-top: 5px; margin-bottom: 20px; font-size: 11px;">(Ký và ghi rõ họ tên)</p>
            <div class="signature-container">
                <div th:if="${evmSignatureUrl != null}">
                    <img th:src="${evmSignatureUrl}" alt="Chữ ký EVM" class="signature-image" />
                </div>
                <div th:if="${evmSignatureUrl == null}" style="min-height: 80px;"></div>
            </div>
            <p style="margin-top: 20px;" th:text="${evmStaff.fullName}">...</p>
        </div>
        <div class="signature-box">
            <h3>BÊN MUA (BÊN B)</h3>
            <p class="subtitle">Đại diện đại lý</p>
            <p style="margin-top: 5px; margin-bottom: 20px; font-size: 11px;">(Ký và ghi rõ họ tên)</p>
            <div class="signature-container">
                <div style="min-height: 80px;"></div>
            </div>
        </div>
    </div>
</div>
</body>
</html>

